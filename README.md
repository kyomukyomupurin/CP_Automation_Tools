# CP_Automation_Tools
Automation tools for competitive programming. 

競プロでサンプル入出力の取得、サンプルのチェック、提出等を自動化するツール

パスの扱いは Linux 環境を想定

## 機能

- ログイン
- サンプル入出力のダウンロード
- サンプルが合うかチェック
- 提出

## 対応するサイト(予定)

- AtCoder
- Codeforces
- AOJ
- yosupo judge
- LeetCode

## 実装メモ

### AtCoder

#### コンテスト情報

- URL の形式 : https://atcoder.jp/contests/{contest}

- 問題数を取得するのが地味にむずい
  - 6 問で決め打ちでもあまり困らないかも？

#### サンプル入出力の取得

- URL の形式 : https://atcoder.jp/contests/{contest}/tasks/{contest}_{id}

- 文字列 {contest} に ```-``` が含まれてるときは {contest}_{id} の部分では ```-``` を ```_``` に置換する必要がある
  - 例 : https://atcoder.jp/contests/m-solutions2020/tasks/m_solutions2020_a
  - ```f"contest.replace("-", "_")"``` と書くと " と " の間でパースされてエラーになるので ```replace()``` の中はシングルクォーテーションで書く必要がある(最初詰まった)

- ABC 級と ARC 級の企業コンが同時開催されてると URL と id の規則性がちょっと複雑

- id は 6 問なら a-f

- 太古の問題は a-f の部分が 1-4 だったりする
  - つらい　どうしてこんなことに
  - 対策 : 太古の問題は、解かない！

- h3 タグで "Sample Input", "Sample Output" の直後の pre タグで囲まれた部分に入力・出力があるのでそれを抜く
  - 太古のコンテストだと英語版が用意されていなくて "入力例"、"出力例" を見つけて抜く必要がある
  - とはいえ、ソースコードに日本語を書くのは気が進まない
  - 対策 : 太古の問題は、解かない！

#### サンプルのチェック

- 余分な空白、改行は許容してチェックする必要がある
  - まず ```"\n"``` を ```" "``` に置換
  - re モジュール(正規表現ライブラリ)で連続する ```" "``` を 1 つの ```" "``` に圧縮
  - 先頭・末尾の ```" "``` を除去して比較

- 複数の出力が正解になり得るような問題
  - 対応できないので、自分で出力を眺めて確認する

- 出力が浮動小数点数になる問題
  - TO DO : スクレイピングの際に許容誤差の情報も抜く

- ターミナル起動後初回のコンパイルが遅いので、サンプルダウンロード中に非同期でコンパイルを実行しておく
- 実行時間制限はとりあえず 2 秒で決め打ち
  - TO DO : html ソースから情報を抜く

#### ログインと提出

- ```requests.Session()``` でできる
- csrf token はセキュリティのためのワンタイムトークン(Cookie とは別物)
- ログイン時に Cookie を取得してローカルに保存しておく(有効期限は半年くらい？)

#### TO DO

- 実行時間制限の取得
- サンプルチェックの際に TLE 判定できるようにする
- 出力が浮動小数点数になる問題への対応
  - 許容誤差の取得
- 問題文の情報を見て必要なライブラリを貼っておく機能
  - "Yes"/"No"
  - 1000000007